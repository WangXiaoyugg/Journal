<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>mvvm-step-2</title>
</head>
<body>
	<script>
		// 发布订阅模式
		class Subject {
			constructor() {
				this.observers = []; // 观察者容器
			}

			addObserver(observer) {
				this.observers.push(observer)
			}

			removeObserver(observer) {
				let index = this.observers.indexOf(observer);
				if(index > -1) {
					this.observer.splice(index, 1)
				}
			}

			// 遍历数组容器，执行每一个observer.update 方法
			notify() {
				this.observers.forEach(observer => {
					observer.update()
				})
			}	
		}

		class Observer {
			constructor(name) {
				this.update = function() {
					console.log(`${name} updated!`)
				}
			}
		}

		let subject = new Subject();
		var o1 = new Observer('o1');
		// o1.update = function () {
		// 	console.log('o1 update!')
		// }
		subject.addObserver(o1);

		var o2 = new Observer('o2');
		// o2.update = function () {
		// 	console.log(`o2 update!`)
		// }
		subject.addObserver(o2) 

		subject.notify();
	</script>
</body>
</html>